<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>èª­ã¿è¾¼ã¿ä¸­...</title>
  <style>
    /* ãƒ†ãƒ¼ãƒå¤‰æ•°ï¼ˆæœ€å°ï¼‰ */
    :root { --bg: #fff; --fg: #000; color-scheme: light dark; }
    [data-theme="dark"] { --bg: #111; --fg: #eee; }

    .lang-ja, .lang-en { display: none; }
    .lang-visible { display: block; }

    body {
      counter-reset: h2 h3;
      margin: 0;
      padding: 40px 16px;
      background: var(--bg);
      color: var(--fg);
    }
    h2::before { counter-increment: h2; content: counter(h2) ". "; }
    h3::before { counter-increment: h3; content: counter(h2) "." counter(h3) ". "; }

    header {
      position: fixed; top: 0; left: 0; width: 100%;
      background: var(--bg);
      display: flex; justify-content: space-between; align-items: center;
      padding: 8px 16px;
    }
    header nav a {
      color: var(--fg);
      text-decoration: none;
      margin-right: 10px;
    }
    /* ãƒ›ãƒãƒ¼æ™‚ã¯è‰²ã ã‘å¤‰æ›´ï¼ˆå¤ªå­—ãªã—ï¼‰ */
    header nav a:hover {
      color: #007acc;
    }

    .controls { display: flex; align-items: center; gap: 8px; margin-right: 15px; }

    #lang-select {
      background: var(--bg);
      color: var(--fg);
       border: none; /* â† æ ç·šã‚’å‰Šé™¤ */
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      padding: 4px 8px;
      border-radius: 4px;
    }

    #theme-toggle {
      background: none; border: none; cursor: pointer;
      font-size: 1.2em; color: var(--fg);
    }
  </style>
</head>
<body>
  <header>
    <nav>
      <!-- æ—¥æœ¬èª -->
      <span class="lang lang-ja">
        <a href="./index.html">ç”°ä¸­æ´‹å¹³ã®ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸</a>
        <a href="./web-cv.html">çµŒæ­´æ›¸</a>
        <a href="./web-research.html">ç ”ç©¶æ¥­ç¸¾</a>
      </span>
      <!-- è‹±èª -->
      <span class="lang lang-en">
        <a href="./index.html">Yohei Tanaka's Home Page</a>
        <a href="./web-cv.html">CV</a>
        <a href="./web-research.html">Research</a>
      </span>
    </nav>

    <div class="controls">
      <button id="theme-toggle" title="Toggle dark mode">â˜€</button>
<select id="lang-select">
 <option value="ja">ğŸŒï¸ Japanese</option>
  <option value="en">ğŸŒï¸ English</option>
</select>
    </div>
  </header>

  $body$

  <script>
    /* è¨€èªåˆ‡æ›¿ */
    function switchLang(lang) {
      document.documentElement.setAttribute('lang', lang);
      document.querySelectorAll('.lang').forEach(el => el.classList.remove('lang-visible'));
      document.querySelectorAll('.lang-' + lang).forEach(el => el.classList.add('lang-visible'));
      const h1 = document.querySelector('.lang-' + lang + ' h1');
      if (h1) document.title = h1.textContent.trim();
      localStorage.setItem('lang', lang);
    }

    /* ãƒ†ãƒ¼ãƒé©ç”¨ */
    function applyTheme(theme) {
      document.documentElement.setAttribute('data-theme', theme);
      document.getElementById('theme-toggle').textContent = (theme === 'dark' ? 'â˜¾' : 'â˜€');
      localStorage.setItem('theme', theme);
    }

    document.addEventListener('DOMContentLoaded', () => {
      // è¨€èªã®å¾©å…ƒ
      const savedLang = localStorage.getItem('lang') || 'ja';
      document.getElementById('lang-select').value = savedLang;
      switchLang(savedLang);
      document.getElementById('lang-select').addEventListener('change', e => switchLang(e.target.value));

      // ãƒ†ãƒ¼ãƒã®å¾©å…ƒï¼ˆãªã‘ã‚Œã°OSè¨­å®šï¼‰
      const savedTheme = localStorage.getItem('theme');
      const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      applyTheme(savedTheme || (prefersDark ? 'dark' : 'light'));

      // ã‚¯ãƒªãƒƒã‚¯ã§ãƒ†ãƒ¼ãƒåˆ‡æ›¿
      document.getElementById('theme-toggle').addEventListener('click', () => {
        const t = document.documentElement.getAttribute('data-theme');
        applyTheme(t === 'dark' ? 'light' : 'dark');
      });
    });
  </script>
</body>
</html>